# ユーザー検索

## 概要

ユーザー ID とパスワードで一致するユーザを検索

## エンドポイント

/api/todo/user/search

## 入力データ

| 和名        | 物理名   | 型     | 値域 | 必須 |
| ----------- | -------- | ------ | ---- | ---- |
| -           | -        | -      | -    | -    |
| ユーザー ID | userId   | 文字列 | -    | 〇   |
| パスワード  | password | 文字列 | -    | 〇   |

## 出力データ

| 和名           | 物理名   | 型             | 値域       | 必須 |
| -------------- | -------- | -------------- | ---------- | ---- |
| -              | -        | -              | -          | -    |
| 処理結果       | result   | 論理           | true,false | 〇   |
| ユーザーデータ | userData | ユーザーデータ | -          | -    |

### ユーザーデータ

| 和名           | 物理名    | 型     | 値域 | 必須 |
| -------------- | --------- | ------ | ---- | ---- |
| -              | -         | -      | -    | -    |
| ユーザー ID    | userId    | 文字列 | -    | 〇   |
| ユーザー名     | userName  | 文字列 | -    | 〇   |
| パスワード     | password  | 文字列 | -    | 〇   |
| メールアドレス | email     | 文字列 | -    | 〇   |
| 日時           | createdAt | 日時   | -    | 〇   |

## 処理詳細

1. 入力データにユーザー ID が存在しない場合、例外を発生させる。
   - 「入力データにユーザー ID が存在しません」
2. 入力データにパスワードが存在しない場合、例外を発生させる。
   - 「入力データにパスワードが存在しません」
3. 入力データ.パスワードをハッシュ値に変換する。
4. 以下の通り、ユーザーテーブルテーブルから検索し、検索結果を取得する。

   > 取得項目
   > ・ユーザーテーブル.id
   > ・ユーザーテーブル.username
   > ・ユーザーテーブル.password_hash
   > ・ユーザーテーブル.email
   > ・ユーザーテーブル.created_at

   > 取得テーブル
   > ・ユーザーテーブル

   > 検索条件
   > ・ユーザーテーブル.id = 入力データ.ユーザー ID
   > ・ユーザーテーブル.password_hash = 変換結果のハッシュ値

5. 出力データのユーザーデータに以下の値を設定する。
   > ・ユーザーデータ.ユーザー ID=検索結果の id
   > ・ユーザーデータ.ユーザー名=検索結果の username
   > ・ユーザーデータ.メールアドレス=検索結果の email
   > ・ユーザーデータ.日時=検索結果の created_at
6. 出力データの処理結果に「true」を設定し、返却する。
7. 上記の処理で異常が発生した場合は、出力データの処理結果に「false」を設定し、返却する。
