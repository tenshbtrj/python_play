# タスク検索

## 概要

タスクとタスクステータスを結合し、ユーザー ID で検索

## エンドポイント

/api/todo/task/search

## 入力データ

| 和名        | 物理名 | 型     | 値域 | 必須 |
| ----------- | ------ | ------ | ---- | ---- |
| ユーザー ID | userId | 文字列 | -    | 〇   |

## 出力データ

| 和名           | 物理名     | 型               | 値域       | 必須 |
| -------------- | ---------- | ---------------- | ---------- | ---- |
| 処理結果       | result     | 論理             | true,false | 〇   |
| 検索結果リスト | searchList | リスト(検索結果) | ----       | ---- |

### 検索結果

| 和名     | 物理名      | 型     | 値域 | 必須 |
| -------- | ----------- | ------ | ---- | ---- |
| ID       | id          | 数値   | -    | 〇   |
| タイトル | title       | 文字列 | -    | 〇   |
| テキスト | description | 文字列 | -    | -    |
| 優先度   | priority    | 数値   | -    | 〇   |
| 期限     | due_date    | 日時   | -    | -    |
| 状態     | status      | 数値   | -    | 〇   |

## 処理詳細

1. 入力データにユーザー ID がない場合は、例外を発生させる。
   - 「入力データにユーザー ID がありません」
2. 入力データからユーザー ID を取得する。
3. 以下の通り、タスクテーブルとタスクステータステーブルから検索し、検索結果を取得する。

   > 取得項目
   > ・タスクテーブル.id
   > ・タスクテーブル.title
   > ・タスクテーブル.description
   > ・タスクテーブル.priority
   > ・タスクテーブル.due_date
   > ・タスクステータステーブル.status

   > 取得テーブル
   > ・タスクテーブル
   > ・タスクステータステーブル

   > 結合条件
   > ・タスクテーブル.id = タスクステータステーブル.task_id

   > 検索条件
   > ・タスクテーブル.id = 入力データ.ユーザー ID

4. 出力データの検索結果に検索結果を設定する。
5. 出力データの処理結果に「true」を設定し、返却する。
6. 上記の処理で異常が発生した場合は、出力データの処理結果に「false」を設定し、返却する。
